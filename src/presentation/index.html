<!DOCTYPE html>
<html lang="en">
<head>
	<title>SHRI F(x) Talks</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/talks/styles/screen-16x10.css">
	<link rel="stylesheet" href="/talks/libs/highlight/styles/atom-one-light.css">
</head>
<body class="shower list">
	<header class="caption">
		<h1>Визуализация данных на Яндекс.Картах</h1>
		<p>ШРИ F(x)</p>
    </header>

	<section class="slide slide-cover" id="cover">
		<h2>Визуализация данных на Яндекс.Картах</h2>
    </section>

	<section class="slide">
        <h2>Демо</h2>
        <a style="float: left;" href="http://qrcoder.ru" target="_blank">
            <img src="http://qrcoder.ru/code/?https%3A%2F%2Fyandex-shri-fx-team.github.io%2Fymaps-gridmap-layer%2Fmain%2F&6&0" width="320" height="320" border="0" title="QR код">
        </a>
        <a style="float: right;" href="http://qrcoder.ru" target="_blank">
            <img src="http://qrcoder.ru/code/?https%3A%2F%2Fyandex-shri-fx-team.github.io%2Fymaps-polygonmap%2Fmain%2F&6&0" width="320" height="320" border="0" title="QR код">
        </a>
    </section>

	<section class="slide slide-cover">
        <h2 class="center">Задача</h2>
    </section>

	<section class="slide">
        <h2>Задача</h2>
        <p>Сделать два модуля API Яндекс.Карт для визуализации геоданных:</p>
        <ul>
            <li><strong>Региональная инфографика</strong> — вид визуализации, которая отображает интенсивность показателя для административных зон (стран, штатов, городов, районов, кварталов).</li>
            <li><strong>Grid map</strong> (cетчатая карта) — вид визуализации данных, когда карта делится на ячейки в форме гексагонов, квадратов, кругов и тд.</li>
        </ul>
    </section>

	<section class="slide">
        <h2>Что такое визуализация?</h2>
        <figure>
            <blockquote>
                <p><strong>Визуализация</strong> (от лат. visualis, «зрительный») — общее название приёмов представления числовой информации или физического явления в виде, удобном для зрительного наблюдения и анализа.</p>
            </blockquote>
            <figcaption>Википедия</figcaption>
        </figure>
    </section>

	<section class="slide">
        <h2>Пример — Таблица</h2>
        <p>Велопарковки г. Москвы:</p>
		<table>
		<tr>
			<th scope="col">Район</th>
			<th>Количество, шт.</th>
		</tr>
		<tr>
			<td>Филёвский Парк</td>
			<td>1</td>
		</tr>
		<tr>
			<td>Матушкино</td>
			<td>3</td>
		</tr>
		<tr>
			<td>Савёлки</td>
			<td>11</td>
		</tr>
		<tr>
			<td>Внуковское</td>
			<td>2</td>
		</tr>
		<tr>
			<td>Силино</td>
			<td>7</td>
		</tr>
		<tr>
			<td>Крюково</td>
			<td>6</td>
		</tr>
		</table>
    </section>

	<section class="slide">
        <h2>Пример — График</h2>
		<figure>
			<img src="/talks/pictures/pres2-chart.png" alt="График">
		</figure>
    </section>

	<section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/pres2-dotmap.png" alt="Dot map">
        </figure>
    </section>

	<section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/pres2-bubblemap.png" alt="Bubble map">
        </figure>
    </section>

	<section class="slide slide-cover">
        <h2 class="center">Продукт</h2>
    </section>

	<section class="slide">
        <h2>Кто наш пользователь?</h2>
    </section>

	<section class="slide">
        <h2 class="white shadow">Веб-мастер</h2>
        <figure>
            <img class="cover cover-full-height" src="/talks/pictures/pres2-webmaster.jpg" alt="Webmaster">
        </figure>
    </section>

	<section class="slide">
        <h2 class="white shadow">Команда разработчиков</h2>
        <figure>
            <img class="cover cover-full-width" src="/talks/pictures/pres2-team.jpg" alt="Team">
        </figure>
    </section>

	<section class="slide">
        <h2>Наше решение</h2>
        <ul>
            <li class="next"><strong><a href="https://github.com/yandex-shri-fx-team/ymaps-polygonmap" target="_blank">Polygonmap</a></strong> — модуль, работает с любыми полигонами.</li>
            <li class="next"><strong><a href="https://github.com/yandex-shri-fx-team/ymaps-regionmap" target="_blank">Regionmap</a></strong> — модуль, работает с модулем Регионы API Яндекс.Карт.</li>
            <li class="next"><strong><a href="https://github.com/yandex-shri-fx-team/ymaps-gridmap" target="_blank">Gridmap</a></strong> — модуль, генерирует сетку.</li>
            <li class="next"><strong><a href="https://github.com/yandex-shri-fx-team/ymaps-gridmap-layer" target="_blank">GridmapLayer</a></strong> — модуль, генерирует сетку с большим количеством ячеек (но с ограничениями).</li>
        </ul>
    </section>

	<section class="slide slide-cover">
        <h2 class="center">Техническая часть</h2>
    </section>

	<section class="slide">
        <h2>Технологии</h2>
        <p>Клиент:</p>
        <ul>
            <li><strong>API Яндекс.Карт</strong> — для работы с картой.</li>
            <li><strong><a href="https://github.com/leaflet-extras/RTree" target="_blank">rtree</a></strong> (GridmapLayer) — для оптимизации производительности при работе с пиксельными координатами.</li>
            <li><strong><a href="https://github.com/mikolalysenko/robust-point-in-polygon" target="_blank">robust-point-in-polygon</a></strong> — для расчета вхождения точки в полигон.</li>
            <li><strong><a href="https://github.com/bpostlethwaite/colormap" target="_blank">colormap</a></strong> (Polygonmap) — готовые пресеты палитры.</li>
        </ul>
    </section>

	<section class="slide">
        <h2>Технологии</h2>
        <p>Инфраструктура:</p>
        <ul>
            <li><strong>npm</strong> — для управления зависимостями.</li>
            <li><strong>babel</strong> — для транспиляции кода в ES5.</li>
            <li><strong>webpack</strong> — для разработки и сборки.</li>
            <li><strong>eslint</strong> — для линтинга кода.</li>
            <li><strong>mocha</strong> — для написания тестов.</li>
            <li><strong>istanbul</strong> — для генерации отчетов о покрытии кода тестами.</li>
            <li><strong>jsdoc-to-markdown</strong> — для автоматической генерации документации</li>
        </ul>
    </section>

	<section class="slide">
        <h2>Архитектура</h2>
        <ul style="display: inline-block; width: 49%; vertical-align: top;">
            <li><strong>Polygonmap</strong>
                <ul>
                    <li>API Яндекс.Карт</li>
                    <li><a href="https://github.com/mikolalysenko/robust-point-in-polygon" target="_blank">robust-point-in-polygon</a></li>
                    <li><a href="https://github.com/bpostlethwaite/colormap" target="_blank">colormap</a></li>
                </ul>
            </li>
            <li><strong>Regionmap</strong>
                <ul>
                    <li>API Яндекс.Карт</li>
                    <li>Модуль Регионы</li>
                    <li>Polygonmap</li>
                </ul>
            </li>
        </ul>
        <ul style="display: inline-block; width: 39%; vertical-align: top;">
            <li><strong>Gridmap</strong>
                <ul>
                    <li>API Яндекс.Карт</li>
                    <li>Polygonmap</li>
                </ul>
            </li>
        </ul>
    </section>

	<section class="slide">
        <h2>Архитектура</h2>
        <ul>
            <li><strong class="wiki-bold">GridmapLayer</strong>
                <ul>
                    <li>API Яндекс.Карт</li>
                    <li><a href="https://github.com/mikolalysenko/robust-point-in-polygon" target="_blank">robust-point-in-polygon</a></li>
                    <li><a href="https://github.com/leaflet-extras/RTree" target="_blank">rtree</a></li>
                </ul>
            </li>
        </ul>
    </section>

	<section class="slide">
        <h2>Формат данных</h2>
        <ul><li><a class="b-link wiki-ref wiki-ref wiki-ref_magiclink_yes i-bem wiki-ref_js_inited" href="http://geojson.org" target="_blank" title="Внешняя ссылка (откроется в новом окне)">GeoJSON</a> — порядок координат: longlat (долгота, широта).</li><li><a class="b-link wiki-ref wiki-ref wiki-ref_magiclink_yes i-bem wiki-ref_js_inited" href="https://tech.yandex.ru/maps/doc/jsapi/2.1/ref/reference/ObjectManager-docpage/#add-param-objects" target="_blank" title="Внешняя ссылка (откроется в новом окне)">GeoJSONlike</a> — порядок координат: любой.</li></ul>
    </section>

	<section class="slide">
        <h2>Задачи</h2>
        <ul>
            <li class="next">Расчет сетки (Gridmap и GridmapLayer)</li>
            <li class="next">Расчет вхождения точки в полигон</li>
            <li class="next">Расчет палитры</li>
            <li class="next">Работа с данными (фильтрация, стилизация)</li>
            <li class="next">Интерактивность</li>
            <li class="next">Отрисовка объектов на карте</li>
            <li class="next">Создание легенды</li>
            <li class="next">Перформанс и поддержка</li>
        </ul>
    </section>

	<section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/pres2-gridmap-layer.gif" alt="GridmapLayer">
        </figure>
    </section>

	<section class="slide slide-cover">
        <h2 class="center">Демо</h2>
    </section>

    <section class="slide">
        <h2>С чего начать?</h2>
        <ul>
            <li class="next">Заходим на <a href="https://github.com/yandex-shri-fx-team" target="_blank">GitHub</a> и скачиваем нужный модуль (например, <a href="https://github.com/yandex-shri-fx-team/ymaps-polygonmap" target="_blank">Polygonmap</a>).</li>
            <li class="next">Читаем <a href="https://github.com/yandex-shri-fx-team/ymaps-polygonmap#readme" target="_blank">документацию</a>.</li>
            <li class="next"><a href="https://tech.yandex.ru/maps/doc/jsapi/2.1/dg/concepts/load-docpage/" target="_blank">Подключаем API Яндекс.Карт</a>.</li>
            <li class="next"><a href="https://github.com/yandex-shri-fx-team/ymaps-polygonmap#loading" target="_blank">Подключаем модуль</a>.</li>
            <li class="next"><a href="https://tech.yandex.ru/maps/doc/jsapi/2.1/dg/concepts/map-docpage/" target="_blank">Создаём карту</a>.</li>
            <li class="next"><a href="https://github.com/yandex-shri-fx-team/ymaps-polygonmap#displaying-polygonmap-over-geographical-map" target="_blank">Инициализируем модуль</a>.</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Инициализация</h2>
        <pre>
            <code class="js">ymaps.ready(() => {
    const myMap = new ymaps.Map('map', { /* ... */ });
    ymaps.modules.require(['Polygonmap'], (Polygonmap) => {
        const polygonmap = new Polygonmap({polygons, points});

        polygonmap.setMap(myMap);
    });
});
            </code>
        </pre>
    </section>

    <section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/pres2-example-1.png" alt="Polygonmap">
        </figure>
    </section>
    <section class="slide">
        <h2 style="text-align: center">"А давайте поменяем"</h2>
        <ul class="ul-no-dot center">
            <li><input type="checkbox"><label for="">Цвета не нравятся и их мало</label></li>
            <li><input type="checkbox"><label for="">Не видно карту под полигонами</label></li>
            <li><input type="checkbox"><label for="">Границы слишком белые</label></li>
            <li><input type="checkbox"><label for="">Легенда не в том углу</label></li>
        </ul>
    </section>
    <section class="slide">
        <h2 class="center">"Ща, 5 сек"</h2>
    </section>

    <section class="slide">
            <h3><strong>Поменяем палитру и количество цветов</strong></h3>
            <pre>
            <code class="js">
ymaps.modules.require(['Polygonmap'], (Polygonmap) => { 
    const polygonmap = new Polygonmap({polygons, points}, {
        colorScheme: 'summer',
        colorRanges: 10
    });
    polygonmap.setMap(myMap);
});
            </code>
            </pre>
    </section>
    <section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/demo-1.png" alt="Polygonmap">
        </figure>
    </section>
    <section class="slide">
        <h3>
            <strong>Добавим прозрачности</strong>
        </h3>    
        <pre>
                <code class="js">ymaps.modules.require(['Polygonmap'], (Polygonmap) => { 
    const polygonmap = new Polygonmap({polygons, points}, {
        colorScheme: 'summer',
        colorRanges: 10,
        fillopacity: 0.7
    });
    polygonmap.setMap(myMap);
});
                </code>
                </pre>
    </section>
    <section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/demo-2.png" alt="Polygonmap">
        </figure>
    </section>
    <section class="slide">
        <h3>
            <strong>Изменим внешний вид границ</strong>
        </h3>
        <pre>
            <code class="js">ymaps.modules.require(['Polygonmap'], (Polygonmap) => { 
    const polygonmap = new Polygonmap({polygons, points}, {
        colorScheme: 'summer',
        colorRanges: 10,
        fillopacity: 0.7,
        strokeColor: '#666',
        strokeWidth: 1
    });
    polygonmap.setMap(myMap);
});
            </code>
        </pre>
    </section>
    <section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/demo-3.png" alt="Polygonmap">
        </figure>
    </section>
    <section class="slide">
        <h3>
            <strong>Передвинем легенду</strong>
        </h3>
        <pre>
            <code class="js">ymaps.modules.require(['Polygonmap'], (Polygonmap) => { 
    const polygonmap = new Polygonmap({polygons, points}, {
        colorScheme: 'summer',
        colorRanges: 10,
        fillopacity: 0.7,
        strokeColor: '#666',
        strokeWidth: 1,
        legendPosition: {top: 20, left: 20}
    });
    polygonmap.setMap(myMap);
});
            </code>
            </pre>
    </section>
    <section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/demo-4.png" alt="Polygonmap">
        </figure>
    </section>
    <section class="slide">
        <h2 style="text-align: center">Well done</h2>
        <ul class="ul-no-dot center">
            <li>
                <input type="checkbox" checked>
                <label for="">Цвета не нравятся и их мало</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Не видно карту под полигонами</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Границы слишком белые</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Легенда не в том углу</label>
            </li>
        </ul>
    </section>
    <section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/demo-5.png" alt="Polygonmap">
        </figure>
    </section>
    <section class="slide">
        <h2 style="text-align: center; text-decoration: line-through">Well done</h2>
        <ul class="ul-no-dot center">
            <li>
                <input type="checkbox" checked>
                <label for="">Цвета не нравятся и их мало</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Не видно карту под полигонами</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Границы слишком белые</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Легенда не в том углу</label>
            </li>
            <li>
                <input type="checkbox">
                <label for="">Не нравится всплывающее окно</label>
            </li>
        </ul>
    </section>
    <section class="slide">
        <h3>
            <strong>Изменим всплывающее окно</strong>
        </h3>
        <pre>
                <code class="js">const polygonmap = new Polygonmap({polygons, points}, {
    balloonContent(object) {
        return `&lt;div&gt;
            &lt;div&gt;Район: ${object.properties.NAME}&lt;/div&gt;
            &lt;div&gt;
                    ${object.properties.pointsCount} 🚴🚴🚴🚴
            &lt;/div&gt;&lt;/div&gt;`;
    }
});
                </code>
                    </pre>
    </section>
    <section class="slide">
        <figure>
            <img class="cover" src="/talks/pictures/demo-6.png" alt="Polygonmap">
        </figure>
    </section>
    <section class="slide">
        <h2 style="text-align: center">Well done</h2>
        <ul class="ul-no-dot center">
            <li>
                <input type="checkbox" checked>
                <label for="">Цвета не нравятся и их мало</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Не видно карту под полигонами</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Границы слишком белые</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Легенда не в том углу</label>
            </li>
            <li>
                <input type="checkbox" checked>
                <label for="">Не нравится всплывающее окно</label>
            </li>
        </ul>
    </section>
	<section class="slide">
        <h2>Ссылки</h2>
        <ul>
            <li><strong>Polygonmap</strong> (<a href="https://github.com/yandex-shri-fx-team/ymaps-polygonmap" target="_blank">github</a>, <a href="https://yandex-shri-fx-team.github.io/ymaps-polygonmap" target="_blank">демо</a>)</li>
            <li><strong>Regionmap</strong> (<a href="https://github.com/yandex-shri-fx-team/ymaps-regionmap" target="_blank">github</a>, <a href="https://yandex-shri-fx-team.github.io/ymaps-regionmap" target="_blank">демо</a>)</li>
            <li><strong>Gridmap</strong> (<a href="https://github.com/yandex-shri-fx-team/ymaps-gridmap" target="_blank">github</a>, <a href="https://yandex-shri-fx-team.github.io/ymaps-gridmap" target="_blank">демо</a>)</li>
            <li><strong>GridmapLayer</strong> (<a href="https://github.com/yandex-shri-fx-team/ymaps-gridmap-layer" target="_blank">github</a>, <a href="https://yandex-shri-fx-team.github.io/ymaps-gridmap-layer" target="_blank">демо</a>)</li>
        </ul>
    </section>

	<section class="slide slide-cover">
        <h2 class="center">Спасибо</h2>
    </section>

	<script src="/talks/libs/shower/shower.min.js"></script>
	<script src="/talks/libs/highlight/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>
